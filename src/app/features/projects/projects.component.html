<app-page-layout>
  <app-page-header
    title="Projects"
    subtitle="Building scalable applications with modern technologies"
  />

  <!-- Filters -->
  <app-section>
    <div class="flex flex-wrap items-center gap-6 mb-8">
      <!-- Category Filters -->
      <div class="flex flex-wrap gap-2">
        <button
          (click)="selectedCategory.set('all')"
          [class.text-blue-600]="selectedCategory() === 'all'"
          [class.dark:text-blue-400]="selectedCategory() === 'all'"
          [class.font-semibold]="selectedCategory() === 'all'"
          class="text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors"
        >
          All ({{ projects.length }})
        </button>

        @for (category of categories; track category.value) {
          <span class="text-gray-300 dark:text-gray-700">â€¢</span>
          <button
            (click)="selectedCategory.set(category.value)"
            [class.text-blue-600]="selectedCategory() === category.value"
            [class.dark:text-blue-400]="selectedCategory() === category.value"
            [class.font-semibold]="selectedCategory() === category.value"
            class="text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors"
          >
            {{ category.label }} ({{ getProjectCountByCategory(category.value) }})
          </button>
        }
      </div>

      <!-- Search -->
      <div class="ml-auto w-full sm:w-64">
        <app-search-input
          [value]="searchQuery()"
          (valueChange)="searchQuery.set($event)"
          placeholder="Search projects..."
        />
      </div>
    </div>
  </app-section>

  <!-- Projects Grid or Empty State -->
  <app-section>
    @if (filteredProjects().length === 0) {
      <app-empty-state
        icon="search_off"
        title="No projects found"
        description="Try adjusting your search or category filters to see more results"
        actionLabel="Clear All Filters"
        (action)="clearAllFilters()"
      />
    } @else {
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        @for (project of filteredProjects(); track project.id) {
          <app-project-card
            [project]="project"
            [categoryLabel]="getCategoryLabel(project.category)"
            (liveClick)="trackProjectClick(project.id, 'live')"
            (githubClick)="trackProjectClick(project.id, 'github')"
            (detailClick)="trackProjectClick(project.id, 'view')"
          />
        }
      </div>
    }
  </app-section>
</app-page-layout>
